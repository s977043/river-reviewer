# AIレビュー プラン/コスト運用（Static）

## プラン差（可能な範囲）

- **SaaS 版**: 公式サポート・運用負荷の低さが強み。プランによりモデル/コンテキストや同時実行数が制限される場合がある。
- **OSS 版**: モデル/プロバイダを自由に選べるが、保守・セキュリティ・費用の見積もりが自己責任。

## 制限が運用に与える影響

- **モデル/コンテキスト制限**により、ファイルがスキップされる可能性がある。
- 大規模 PR は全文レビューより **要約中心**に切り替えた方がコスト対効果が高い。

## コスト/品質トレードオフ（River-Reviewer ルール）

- **PR サイズ/変更ファイル数が閾値を超える場合は要約のみ**にする。
- **重要領域（security/infra/core）だけ深掘り**し、その他は要約と注意喚起に留める。
- **トークン超過が疑われる場合は縮退**（対象ファイルを絞る/要約に寄せる）。

### ルール例（調整用テンプレ）

- 変更ファイル数 > 30 または差分 > 1,000 行: 要約のみ
- 重要パスのみ: `src/security/**`, `infra/**`, `core/**`
- ノイズが多い場合: レビューコメント数を上限 10 件に制限

## 参考記事由来の参考値（社内で更新可）

- **PR 数**: 1 日あたり約 5 件
- **費用感**: gpt-4-32k 利用で営業日あたり約 2,000 円前後、月あたり約 40,000 円程度
- **制限**: 8k モデルではファイルが 8k トークンを超えるとレビューがスキップされる

> 注: 上記は公開記事由来の参考値。社内実測で更新すること。

### 更新テンプレート（社内実測）

| 指標         | 参考値（記事）  | 社内実測 | 更新日 | メモ |
| ------------ | --------------- | -------- | ------ | ---- |
| PR/日        | 5               |          |        |      |
| 営業日コスト | 2,000 円前後    |          |        |      |
| 月額コスト   | 40,000 円前後   |          |        |      |
| スキップ条件 | 8k 超でスキップ |          |        |      |

## 意思決定の材料

- コストが高いと感じる場合は **SaaS 版の要約特化**や **モデル変更**を検討する。
- レビュー効果が薄い場合は **要約 + 重要領域深掘り**へ運用を寄せる。
