# レビュー設定ファイル 設定ガイド（Static）

## 役割

- AIレビューの動作をリポジトリ単位で定義する設定ファイル。
- ノイズ抑制、言語、モデル、パス除外、要約フォーマットを統制する。
- ファイル名は導入先の規約に合わせる（例: `.river-review-bot.yaml`）。

## 代表的な設定カテゴリ

- **レビュー挙動**: 小変更レビューの扱い、LGTM コメントの抑制。
- **言語**: レビュー出力の言語（例: `ja-JP`）。
- **モデル/タイムアウト**: 使うモデルと上限時間。
- **要約テンプレート**: PR 要約・リリースノートのフォーマット。
- **パス除外**: 生成物・vendor・lockfile などを除外。
- **System Message**: 重点観点とトーン（短く明確に）。

## 運用上の推奨方針（Static）

- **否定命令（〜するな）だけでは効きづらい**ため、
  まずは **設定フラグで制御**し、必要時に短い指示を追加する。
- **ノイズ抑制を優先**し、重要ポイントに集中させる。
- **日本語出力を固定**し、レビュー読み手の理解コストを下げる。
- **除外パスを明示**して、不要なコンテキスト送信を避ける。

## 推奨デフォルト（例）

- `review_simple_changes: false`
- `review_comment_lgtm: false`
- `language: ja-JP`
- **自動レビューの有無**: 運用に応じて有効化。高頻度変更のリポでは手動推奨。

## 設定例（ダミー値 / OSS 版想定）

```yaml
language: ja-JP
review_simple_changes: false
review_comment_lgtm: false
openai_light_model: gpt-4
openai_heavy_model: gpt-4-32k
openai_timeout_ms: 900000
path_filters: |
  !**/dist/**
  !**/vendor/**
  !**/*.lock
  !**/generated/**
summarize: |
  - 概要: 変更全体を短く要約する
  - レビューのしやすさ: 0-10 点で評価し、改善点を示す
  - ファイル別要約: 変更種別でまとめる
summarize_release_notes: |
  - 新機能/バグ修正/リファクタリング/テスト/ドキュメント/その他で分類
  - 50-100 語程度の簡潔な箇条書き
system_message: |
  重要なリスクや仕様逸脱に集中して指摘してください。
  改善点がない場合はコメントしないでください。
```

## 中央設定（Central config）/ 継承（Inheritance）

- **優先順位（推奨）**: PR コマンド > リポジトリ設定 > 中央設定 > 既定値
- **中央設定で決めるもの**: セキュリティ基準、除外パス、言語、ノイズ抑制フラグ。
- **リポジトリで決めるもの**: モデル選択、要約テンプレート、個別レビュー観点。
- OSS 版で中央設定が使えない場合は、テンプレートを共有してリポジトリに反映する。

## 運用例

- コメントが多い場合は `review_comment_lgtm: false` と `review_simple_changes: false` を優先適用し、
  指示文は短い追記に留める。調整内容は `.river/ai-review/dynamic/tuning-log.md` に記録する。
